{"title":"Threejs å¯¼å…¥æ¨¡å‹","slug":"code/Threejs å¯¼å…¥stlæ¨¡å‹","date":"2021-11-27T12:00:05.000Z","updated":"2023-01-03T10:44:10.509Z","comments":true,"path":"api/articles/code/Threejs å¯¼å…¥stlæ¨¡å‹.json","excerpt":null,"covers":null,"content":"<h2 id=\"æ•ˆæœå±•ç¤º\"><a href=\"#æ•ˆæœå±•ç¤º\" class=\"headerlink\" title=\"æ•ˆæœå±•ç¤º\"></a>æ•ˆæœå±•ç¤º</h2><iframe id=\"modelFrame\" src=\"https://ts.undf.top/3d/bysj.html\" width=\"100%\" height=\"500px\" style = \"border-radius: 10px;\" frameborder=\"0\"></iframe>\n\n<h2 id=\"å…³äºThreejs\"><a href=\"#å…³äºThreejs\" class=\"headerlink\" title=\"å…³äºThreejs\"></a>å…³äºThreejs</h2><p>Three.jsæ˜¯åŸºäºåŸç”ŸWebGLå°è£…è¿è¡Œçš„ä¸‰ç»´å¼•æ“ï¼Œåœ¨æ‰€æœ‰WebGLå¼•æ“ä¸­ï¼ŒThree.jsæ˜¯å›½å†…æ–‡èµ„æ–™æœ€å¤šã€ä½¿ç”¨æœ€å¹¿æ³›çš„ä¸‰ç»´å¼•æ“ã€‚</p>\n<h2 id=\"Iframe\"><a href=\"#Iframe\" class=\"headerlink\" title=\"Iframe\"></a>Iframe</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;modelFrame&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://ts.undf.top/3d/bysj.html&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100%&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;75%&quot;</span> <span class=\"attr\">style</span> = <span class=\"string\">&quot;border-radius: 10px;&quot;</span> <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>ä¸ºäº†æ–¹ä¾¿å¼•å…¥ï¼Œé‡‡ç”¨iframeæ¡†æ¶ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘å¼•å…¥å¤„çš„ä»£ç é•¿åº¦ã€‚</p>\n<h2 id=\"æºç ä»“åº“\"><a href=\"#æºç ä»“åº“\" class=\"headerlink\" title=\"æºç ä»“åº“\"></a>æºç ä»“åº“</h2><p><a href=\"https://github.com/wxydejoy/Test_gitpage\">ç‚¹æˆ‘</a></p>\n<p>ä»“åº“å†…3dæ–‡ä»¶å¤¹ä¸‹é¢å³æ˜¯æ‰€æœ‰æºä»£ç ã€‚å¦‚æœä¸éœ€è¦è‡ªå®šä¹‰ä¿®æ”¹ï¼Œå»ºè®®å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹åˆ°ä½ çš„ç›®å½•å†…ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰æ¨¡å‹å’Œæ ·å¼ï¼Œè¯·å‚ç…§ä¸‹é¢çš„å…³é”®ä»£ç è§£é‡Š</p>\n<h2 id=\"å…³é”®ä»£ç \"><a href=\"#å…³é”®ä»£ç \" class=\"headerlink\" title=\"å…³é”®ä»£ç \"></a>å…³é”®ä»£ç </h2><p>å¦‚æœéœ€è¦æ›´æ”¹jsæ–‡ä»¶çš„ä½ç½®éœ€è¦ä¿®æ”¹ html æ–‡ä»¶é‡Œé¢çš„ä½ç½®å’Œ stl.js æ–‡ä»¶å†…çš„ä½ç½®ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚æœéœ€è¦ä¿®æ”¹æ–‡ä»¶ä½ç½®ï¼Œè®°å¾—ä¿®æ”¹è¿™é‡Œçš„è·¯å¾„</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * as THREE from <span class=\"string\">&#x27;./build/three.module.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> Stats from <span class=\"string\">&#x27;./build/stats.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; STLLoader &#125; from <span class=\"string\">&#x27;./build/stl.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    let container, stats;</span><br><span class=\"line\"></span><br><span class=\"line\">    let camera, cameraTarget, scene, renderer;</span><br><span class=\"line\"></span><br><span class=\"line\">    init();</span><br><span class=\"line\">    animate();</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">init</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        container = document.createElement( <span class=\"string\">&#x27;div&#x27;</span> );</span><br><span class=\"line\">        document.body.appendChild( container );</span><br><span class=\"line\"></span><br><span class=\"line\">        camera = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.PerspectiveCamera( <span class=\"number\">35</span>, window.innerWidth / window.innerHeight, <span class=\"number\">1</span>, <span class=\"number\">30</span> );</span><br><span class=\"line\">        camera.position.set( <span class=\"number\">0</span>, <span class=\"number\">0.85</span>, <span class=\"number\">0</span> );</span><br><span class=\"line\">        <span class=\"comment\">//ç›¸æœºä½ç½®</span></span><br><span class=\"line\">        cameraTarget = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Vector3( <span class=\"number\">0</span>, - <span class=\"number\">0.25</span>, <span class=\"number\">0</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">        scene = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Scene();</span><br><span class=\"line\">        scene.background = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Color( <span class=\"number\">0x72645b</span> );</span><br><span class=\"line\">        scene.fog = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Fog( <span class=\"number\">0x72645b</span>, <span class=\"number\">2</span>, <span class=\"number\">15</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Ground</span></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">plane</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Mesh(</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.PlaneGeometry( <span class=\"number\">40</span>, <span class=\"number\">40</span> ),</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.MeshPhongMaterial( &#123; color: <span class=\"number\">0x999999</span>, specular: <span class=\"number\">0x101010</span> &#125; )</span><br><span class=\"line\">        );</span><br><span class=\"line\">        plane.rotation.x = - Math.PI / <span class=\"number\">2</span>;</span><br><span class=\"line\">        plane.position.y = - <span class=\"number\">0.5</span>;</span><br><span class=\"line\">        scene.add( plane );</span><br><span class=\"line\"></span><br><span class=\"line\">        plane.receiveShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">loader</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">STLLoader</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Binary filesã€‚å³ äºŒè¿›åˆ¶ stl æ–‡ä»¶</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">material</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.MeshPhongMaterial( &#123; color: <span class=\"number\">0xAAAAAA</span>, specular: <span class=\"number\">0x111111</span>, shininess: <span class=\"number\">200</span> &#125; );</span><br><span class=\"line\"></span><br><span class=\"line\">        loader.load( <span class=\"string\">&#x27;./model/bysj.stl&#x27;</span>, function ( geometry ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">const</span> <span class=\"variable\">mesh</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Mesh( geometry, material );</span><br><span class=\"line\">            <span class=\"comment\">//æ¨¡å‹å‚æ•°</span></span><br><span class=\"line\">            mesh.position.set( <span class=\"number\">0</span>, - <span class=\"number\">0.18</span>, - <span class=\"number\">0.1</span> );</span><br><span class=\"line\">            mesh.rotation.set( - Math.PI / <span class=\"number\">2</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span> );</span><br><span class=\"line\">            mesh.scale.set( <span class=\"number\">0.008</span>, <span class=\"number\">0.008</span>, <span class=\"number\">0.008</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">            mesh.castShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            mesh.receiveShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            scene.add( mesh );</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; );</span><br><span class=\"line\"></span><br><span class=\"line\">        scene.add( <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.HemisphereLight( <span class=\"number\">0x443333</span>, <span class=\"number\">0x111122</span> ) );</span><br><span class=\"line\"></span><br><span class=\"line\">        addShadowedLight( <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0xffffff</span>, <span class=\"number\">1.35</span> );</span><br><span class=\"line\">        addShadowedLight( <span class=\"number\">0.5</span>, <span class=\"number\">1</span>, - <span class=\"number\">1</span>, <span class=\"number\">0xffaa00</span>, <span class=\"number\">1</span> );</span><br><span class=\"line\">        <span class=\"comment\">// renderer</span></span><br><span class=\"line\"></span><br><span class=\"line\">        renderer = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.WebGLRenderer( &#123; antialias: <span class=\"literal\">true</span> &#125; );</span><br><span class=\"line\">        renderer.setPixelRatio( window.devicePixelRatio );</span><br><span class=\"line\">        renderer.setSize( window.innerWidth, window.innerHeight );</span><br><span class=\"line\">        renderer.outputEncoding = THREE.sRGBEncoding;</span><br><span class=\"line\"></span><br><span class=\"line\">        renderer.shadowMap.enabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        container.appendChild( renderer.domElement );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// stats</span></span><br><span class=\"line\"></span><br><span class=\"line\">        stats = <span class=\"keyword\">new</span> <span class=\"title class_\">Stats</span>();</span><br><span class=\"line\">        container.appendChild( stats.dom );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\">        window.addEventListener( <span class=\"string\">&#x27;resize&#x27;</span>, onWindowResize );</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">addShadowedLight</span><span class=\"params\">( x, y, z, color, intensity )</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">directionalLight</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.DirectionalLight( color, intensity );</span><br><span class=\"line\">        directionalLight.position.set( x, y, z );</span><br><span class=\"line\">        scene.add( directionalLight );</span><br><span class=\"line\"></span><br><span class=\"line\">        directionalLight.castShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">d</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        directionalLight.shadow.camera.left = - d;</span><br><span class=\"line\">        directionalLight.shadow.camera.right = d;</span><br><span class=\"line\">        directionalLight.shadow.camera.top = d;</span><br><span class=\"line\">        directionalLight.shadow.camera.bottom = - d;</span><br><span class=\"line\"></span><br><span class=\"line\">        directionalLight.shadow.camera.near = <span class=\"number\">1</span>;</span><br><span class=\"line\">        directionalLight.shadow.camera.far = <span class=\"number\">4</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        directionalLight.shadow.bias = - <span class=\"number\">0.002</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">onWindowResize</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        camera.aspect = window.innerWidth / window.innerHeight;</span><br><span class=\"line\">        camera.updateProjectionMatrix();</span><br><span class=\"line\"></span><br><span class=\"line\">        renderer.setSize( window.innerWidth, window.innerHeight );</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">animate</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        requestAnimationFrame( animate );</span><br><span class=\"line\"></span><br><span class=\"line\">        render();</span><br><span class=\"line\">        stats.update();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">render</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">timer</span> <span class=\"operator\">=</span> Date.now() * <span class=\"number\">0.0005</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        camera.position.x = Math.cos( timer ) * <span class=\"number\">3</span>;</span><br><span class=\"line\">        camera.position.z = Math.sin( timer ) * <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        camera.lookAt( cameraTarget );</span><br><span class=\"line\"></span><br><span class=\"line\">        renderer.render( scene, camera );</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<link rel=\"stylesheet\" href=\"/css/spoiler.css\" type=\"text/css\"><script src=\"/js/spoiler.js\" type=\"text/javascript\" async></script>","more":"<h2 id=\"æ•ˆæœå±•ç¤º\"><a href=\"#æ•ˆæœå±•ç¤º\" class=\"headerlink\" title=\"æ•ˆæœå±•ç¤º\"></a>æ•ˆæœå±•ç¤º</h2><iframe id=\"modelFrame\" src=\"https://ts.undf.top/3d/bysj.html\" width=\"100%\" height=\"500px\" style = \"border-radius: 10px;\" frameborder=\"0\"></iframe>\n\n<h2 id=\"å…³äºThreejs\"><a href=\"#å…³äºThreejs\" class=\"headerlink\" title=\"å…³äºThreejs\"></a>å…³äºThreejs</h2><p>Three.jsæ˜¯åŸºäºåŸç”ŸWebGLå°è£…è¿è¡Œçš„ä¸‰ç»´å¼•æ“ï¼Œåœ¨æ‰€æœ‰WebGLå¼•æ“ä¸­ï¼ŒThree.jsæ˜¯å›½å†…æ–‡èµ„æ–™æœ€å¤šã€ä½¿ç”¨æœ€å¹¿æ³›çš„ä¸‰ç»´å¼•æ“ã€‚</p>\n<h2 id=\"Iframe\"><a href=\"#Iframe\" class=\"headerlink\" title=\"Iframe\"></a>Iframe</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;modelFrame&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://ts.undf.top/3d/bysj.html&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100%&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;75%&quot;</span> <span class=\"attr\">style</span> = <span class=\"string\">&quot;border-radius: 10px;&quot;</span> <span class=\"attr\">frameborder</span>=<span class=\"string\">&quot;0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>ä¸ºäº†æ–¹ä¾¿å¼•å…¥ï¼Œé‡‡ç”¨iframeæ¡†æ¶ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘å¼•å…¥å¤„çš„ä»£ç é•¿åº¦ã€‚</p>\n<h2 id=\"æºç ä»“åº“\"><a href=\"#æºç ä»“åº“\" class=\"headerlink\" title=\"æºç ä»“åº“\"></a>æºç ä»“åº“</h2><p><a href=\"https://github.com/wxydejoy/Test_gitpage\">ç‚¹æˆ‘</a></p>\n<p>ä»“åº“å†…3dæ–‡ä»¶å¤¹ä¸‹é¢å³æ˜¯æ‰€æœ‰æºä»£ç ã€‚å¦‚æœä¸éœ€è¦è‡ªå®šä¹‰ä¿®æ”¹ï¼Œå»ºè®®å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹åˆ°ä½ çš„ç›®å½•å†…ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰æ¨¡å‹å’Œæ ·å¼ï¼Œè¯·å‚ç…§ä¸‹é¢çš„å…³é”®ä»£ç è§£é‡Š</p>\n<h2 id=\"å…³é”®ä»£ç \"><a href=\"#å…³é”®ä»£ç \" class=\"headerlink\" title=\"å…³é”®ä»£ç \"></a>å…³é”®ä»£ç </h2><p>å¦‚æœéœ€è¦æ›´æ”¹jsæ–‡ä»¶çš„ä½ç½®éœ€è¦ä¿®æ”¹ html æ–‡ä»¶é‡Œé¢çš„ä½ç½®å’Œ stl.js æ–‡ä»¶å†…çš„ä½ç½®ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚æœéœ€è¦ä¿®æ”¹æ–‡ä»¶ä½ç½®ï¼Œè®°å¾—ä¿®æ”¹è¿™é‡Œçš„è·¯å¾„</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * as THREE from <span class=\"string\">&#x27;./build/three.module.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> Stats from <span class=\"string\">&#x27;./build/stats.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; STLLoader &#125; from <span class=\"string\">&#x27;./build/stl.js&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    let container, stats;</span><br><span class=\"line\"></span><br><span class=\"line\">    let camera, cameraTarget, scene, renderer;</span><br><span class=\"line\"></span><br><span class=\"line\">    init();</span><br><span class=\"line\">    animate();</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">init</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        container = document.createElement( <span class=\"string\">&#x27;div&#x27;</span> );</span><br><span class=\"line\">        document.body.appendChild( container );</span><br><span class=\"line\"></span><br><span class=\"line\">        camera = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.PerspectiveCamera( <span class=\"number\">35</span>, window.innerWidth / window.innerHeight, <span class=\"number\">1</span>, <span class=\"number\">30</span> );</span><br><span class=\"line\">        camera.position.set( <span class=\"number\">0</span>, <span class=\"number\">0.85</span>, <span class=\"number\">0</span> );</span><br><span class=\"line\">        <span class=\"comment\">//ç›¸æœºä½ç½®</span></span><br><span class=\"line\">        cameraTarget = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Vector3( <span class=\"number\">0</span>, - <span class=\"number\">0.25</span>, <span class=\"number\">0</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">        scene = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Scene();</span><br><span class=\"line\">        scene.background = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Color( <span class=\"number\">0x72645b</span> );</span><br><span class=\"line\">        scene.fog = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Fog( <span class=\"number\">0x72645b</span>, <span class=\"number\">2</span>, <span class=\"number\">15</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Ground</span></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">plane</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Mesh(</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.PlaneGeometry( <span class=\"number\">40</span>, <span class=\"number\">40</span> ),</span><br><span class=\"line\">            <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.MeshPhongMaterial( &#123; color: <span class=\"number\">0x999999</span>, specular: <span class=\"number\">0x101010</span> &#125; )</span><br><span class=\"line\">        );</span><br><span class=\"line\">        plane.rotation.x = - Math.PI / <span class=\"number\">2</span>;</span><br><span class=\"line\">        plane.position.y = - <span class=\"number\">0.5</span>;</span><br><span class=\"line\">        scene.add( plane );</span><br><span class=\"line\"></span><br><span class=\"line\">        plane.receiveShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">loader</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">STLLoader</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Binary filesã€‚å³ äºŒè¿›åˆ¶ stl æ–‡ä»¶</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">material</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.MeshPhongMaterial( &#123; color: <span class=\"number\">0xAAAAAA</span>, specular: <span class=\"number\">0x111111</span>, shininess: <span class=\"number\">200</span> &#125; );</span><br><span class=\"line\"></span><br><span class=\"line\">        loader.load( <span class=\"string\">&#x27;./model/bysj.stl&#x27;</span>, function ( geometry ) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"type\">const</span> <span class=\"variable\">mesh</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.Mesh( geometry, material );</span><br><span class=\"line\">            <span class=\"comment\">//æ¨¡å‹å‚æ•°</span></span><br><span class=\"line\">            mesh.position.set( <span class=\"number\">0</span>, - <span class=\"number\">0.18</span>, - <span class=\"number\">0.1</span> );</span><br><span class=\"line\">            mesh.rotation.set( - Math.PI / <span class=\"number\">2</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span> );</span><br><span class=\"line\">            mesh.scale.set( <span class=\"number\">0.008</span>, <span class=\"number\">0.008</span>, <span class=\"number\">0.008</span> );</span><br><span class=\"line\"></span><br><span class=\"line\">            mesh.castShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            mesh.receiveShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            scene.add( mesh );</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; );</span><br><span class=\"line\"></span><br><span class=\"line\">        scene.add( <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.HemisphereLight( <span class=\"number\">0x443333</span>, <span class=\"number\">0x111122</span> ) );</span><br><span class=\"line\"></span><br><span class=\"line\">        addShadowedLight( <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0xffffff</span>, <span class=\"number\">1.35</span> );</span><br><span class=\"line\">        addShadowedLight( <span class=\"number\">0.5</span>, <span class=\"number\">1</span>, - <span class=\"number\">1</span>, <span class=\"number\">0xffaa00</span>, <span class=\"number\">1</span> );</span><br><span class=\"line\">        <span class=\"comment\">// renderer</span></span><br><span class=\"line\"></span><br><span class=\"line\">        renderer = <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.WebGLRenderer( &#123; antialias: <span class=\"literal\">true</span> &#125; );</span><br><span class=\"line\">        renderer.setPixelRatio( window.devicePixelRatio );</span><br><span class=\"line\">        renderer.setSize( window.innerWidth, window.innerHeight );</span><br><span class=\"line\">        renderer.outputEncoding = THREE.sRGBEncoding;</span><br><span class=\"line\"></span><br><span class=\"line\">        renderer.shadowMap.enabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        container.appendChild( renderer.domElement );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// stats</span></span><br><span class=\"line\"></span><br><span class=\"line\">        stats = <span class=\"keyword\">new</span> <span class=\"title class_\">Stats</span>();</span><br><span class=\"line\">        container.appendChild( stats.dom );</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//</span></span><br><span class=\"line\"></span><br><span class=\"line\">        window.addEventListener( <span class=\"string\">&#x27;resize&#x27;</span>, onWindowResize );</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">addShadowedLight</span><span class=\"params\">( x, y, z, color, intensity )</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">directionalLight</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">THREE</span>.DirectionalLight( color, intensity );</span><br><span class=\"line\">        directionalLight.position.set( x, y, z );</span><br><span class=\"line\">        scene.add( directionalLight );</span><br><span class=\"line\"></span><br><span class=\"line\">        directionalLight.castShadow = <span class=\"literal\">true</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">d</span> <span class=\"operator\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        directionalLight.shadow.camera.left = - d;</span><br><span class=\"line\">        directionalLight.shadow.camera.right = d;</span><br><span class=\"line\">        directionalLight.shadow.camera.top = d;</span><br><span class=\"line\">        directionalLight.shadow.camera.bottom = - d;</span><br><span class=\"line\"></span><br><span class=\"line\">        directionalLight.shadow.camera.near = <span class=\"number\">1</span>;</span><br><span class=\"line\">        directionalLight.shadow.camera.far = <span class=\"number\">4</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        directionalLight.shadow.bias = - <span class=\"number\">0.002</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">onWindowResize</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        camera.aspect = window.innerWidth / window.innerHeight;</span><br><span class=\"line\">        camera.updateProjectionMatrix();</span><br><span class=\"line\"></span><br><span class=\"line\">        renderer.setSize( window.innerWidth, window.innerHeight );</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">animate</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        requestAnimationFrame( animate );</span><br><span class=\"line\"></span><br><span class=\"line\">        render();</span><br><span class=\"line\">        stats.update();</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    function <span class=\"title function_\">render</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"variable\">timer</span> <span class=\"operator\">=</span> Date.now() * <span class=\"number\">0.0005</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        camera.position.x = Math.cos( timer ) * <span class=\"number\">3</span>;</span><br><span class=\"line\">        camera.position.z = Math.sin( timer ) * <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        camera.lookAt( cameraTarget );</span><br><span class=\"line\"></span><br><span class=\"line\">        renderer.render( scene, camera );</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","categories":[{"name":"ğŸ’»Code","path":"api/categories/ğŸ’»Code.json"}],"tags":[{"name":"ğŸ“¦Threejs","path":"api/tags/ğŸ“¦Threejs.json"}]}