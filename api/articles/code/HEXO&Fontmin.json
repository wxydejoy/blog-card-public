{"title":"HEXO & Fontmin","slug":"code/HEXO&Fontmin","date":"2021-12-30T12:12:21.000Z","updated":"2022-02-05T06:43:41.720Z","comments":true,"path":"api/articles/code/HEXO&Fontmin.json","excerpt":null,"covers":["https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-26-48.png","https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-23-00.png"],"content":"<h2 id=\"åˆ\"><a href=\"#åˆ\" class=\"headerlink\" title=\"åˆ\"></a>åˆ</h2><p>æƒ³è¦è‡ªå®šä¹‰å­—ä½“å—ï¼Ÿ<br>å­—ä½“å¤ªå¤§ï¼Ÿ<br>æ‹…å¿ƒå­—ä½“æ‹–æ…¢åŠ è½½é€Ÿåº¦ï¼Ÿ<br>å¿«æ¥ä½¿ç”¨gulp-fontminï¼<br>å­—ä½“ç¼©å°5å€ä¸æ˜¯æ¢¦ï¼</p>\n<p>å­—ä½“ä¸€ç›´ä¸€æ¥éƒ½æ˜¯é™æ€åšå®¢ä¸­æ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå°¤å…¶æ˜¯ç‰¹æ®Šçš„å­—ä½“èƒ½è¾¾åˆ°10Mbä»¥ä¸Šï¼Œä¸ºäº†æé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦å¿…é¡»å¯¹ä»–åŠ¨æ‰‹ï¼Œä¹‹å‰å°è¯•è¿‡å­—è››ï¼Œä½†å·²å¹´ä¹…å¤±ä¿®ï¼Œç°æœ‰<a href=\"https://github.com/ecomfe/fontmin\">Fontmin</a>ä»¥åŠ<a href=\"https://github.com/ecomfe/gulp-fontmin\">gulp-fontmin</a>ï¼ˆå…¶å®ä¹Ÿå¥½å¤šå¹´äº†ï¼Œé—®é¢˜ä¸å¤§ï¼‰ï¼Œæ‰€ä»¥è°ƒè¯•ä¸€ä¸‹ï¼Œå†™ç¯‡æ•™ç¨‹ï¼Œç„¶åç¾åŒ–ä¸€ä¸‹è‡ªå·±çš„åšå®¢ã€‚</p>\n<h2 id=\"å¯\"><a href=\"#å¯\" class=\"headerlink\" title=\"å¯\"></a>å¯</h2><p>é¦–å…ˆéœ€è¦æ‰¾åˆ°ä½ å–œæ¬¢çš„å­—ä½“ï¼Œè¿™é‡Œä¸å†è®¨è®ºã€‚</p>\n<p>å®‰è£…ä¾èµ–ï¼ˆæ—¶é—´æœ‰ç‚¹é•¿æ˜¯æ­£å¸¸æƒ…å†µï¼‰</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --global gulp-cli #å…¨å±€å®‰è£…gulpæŒ‡ä»¤é›†</span><br><span class=\"line\">npm install gulp --save #å®‰è£…gulpæ’ä»¶</span><br><span class=\"line\">npm install --save-dev gulp-fontmin</span><br></pre></td></tr></table></figure>\n<h2 id=\"é¢„\"><a href=\"#é¢„\" class=\"headerlink\" title=\"é¢„\"></a>é¢„</h2><p><code>gulp</code>å®‰è£…å®Œæˆåè¿è¡Œ<code>gulp -v</code>æ£€æŸ¥ç‰ˆæœ¬</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gulp -v</span><br><span class=\"line\">CLI version: 2.3.0</span><br><span class=\"line\">Local version: 4.0.2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸­\"><a href=\"#ä¸­\" class=\"headerlink\" title=\"ä¸­\"></a>ä¸­</h2><p>é¦–å…ˆåœ¨åšå®¢æ ¹ç›®å½•æ–°å»º<code>gulpfile.js</code></p>\n<p>å¤åˆ¶ä»¥ä¸‹ä»£ç å¹¶æŒ‰ç…§æ³¨é‡Šä¿®æ”¹</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fontmin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-fontmin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">minifyFont</span>(<span class=\"params\">text, cb</span>) </span>&#123;</span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src(<span class=\"string\">&#x27;source/font/*.ttf&#x27;</span>)  <span class=\"comment\">//åŸå­—ä½“æ‰€åœ¨ç›®å½•</span></span><br><span class=\"line\">        .pipe(fontmin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">text</span>: text</span><br><span class=\"line\">        &#125;))</span><br><span class=\"line\">        .pipe(gulp.dest(<span class=\"string\">&#x27;source/fontdest/&#x27;</span>))<span class=\"comment\">//å‹ç¼©åçš„è¾“å‡ºç›®å½•</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, cb);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;mini-font&#x27;</span>, <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span>  &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> buffers = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src([<span class=\"string\">&#x27;./.deploy_git/**/*.html&#x27;</span>]) <span class=\"comment\">//HTMLæ–‡ä»¶æ‰€åœ¨ç›®å½•è¯·æ ¹æ®è‡ªèº«æƒ…å†µä¿®æ”¹</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;data&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">file</span>) </span>&#123;</span><br><span class=\"line\">            buffers.push(file.contents);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> text = Buffer.concat(buffers).toString(<span class=\"string\">&#x27;utf-8&#x27;</span>);</span><br><span class=\"line\">            minifyFont(text, cb);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;default&#x27;</span>, gulp.parallel(</span><br><span class=\"line\"> <span class=\"string\">&#x27;mini-font&#x27;</span></span><br><span class=\"line\">  ))</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ½®\"><a href=\"#æ½®\" class=\"headerlink\" title=\"æ½®\"></a>æ½®</h2><p>å¼•å…¥å­—ä½“</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@font-face</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-family</span>:<span class=\"string\">&#x27;lxk&#x27;</span> ;  <span class=\"comment\">/* å­—ä½“åè‡ªå®šä¹‰å³å¯ */</span></span><br><span class=\"line\">    <span class=\"attribute\">src</span>:<span class=\"built_in\">url</span>(<span class=\"string\">&#x27;/fontdest/ææ—­ç§‘ä¹¦æ³•1.4.ttf&#x27;</span>); <span class=\"comment\">/* å­—ä½“æ–‡ä»¶è·¯å¾„ */</span></span><br><span class=\"line\">    <span class=\"attribute\">font-display</span> : swap;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Butterfly è¯·å‚ç…§<a href=\"https://akilar.top/posts/ebf20e02/\">åº—é•¿è‡ªå®šä¹‰å­—ä½“æ•™ç¨‹</a></p>\n<h2 id=\"ç»ˆ\"><a href=\"#ç»ˆ\" class=\"headerlink\" title=\"ç»ˆ\"></a>ç»ˆ</h2><p>æœ€ç»ˆæ•ˆæœ</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-26-48.png\" alt=\"2021-12-30-08-26-48\"></p>\n<p>æ³¨ï¼šå­—ä½“è¶Šå¤§å‹ç¼©æ•ˆæœè¶Šå¥½</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-23-00.png\" alt=\"2021-12-30-08-23-00\"></p>\n<p>ä»æ­¤å¯ä»¥è‚†æ— å¿Œæƒ®çš„ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“äº†</p>\n","more":"<h2 id=\"åˆ\"><a href=\"#åˆ\" class=\"headerlink\" title=\"åˆ\"></a>åˆ</h2><p>æƒ³è¦è‡ªå®šä¹‰å­—ä½“å—ï¼Ÿ<br>å­—ä½“å¤ªå¤§ï¼Ÿ<br>æ‹…å¿ƒå­—ä½“æ‹–æ…¢åŠ è½½é€Ÿåº¦ï¼Ÿ<br>å¿«æ¥ä½¿ç”¨gulp-fontminï¼<br>å­—ä½“ç¼©å°5å€ä¸æ˜¯æ¢¦ï¼</p>\n<p>å­—ä½“ä¸€ç›´ä¸€æ¥éƒ½æ˜¯é™æ€åšå®¢ä¸­æ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œå°¤å…¶æ˜¯ç‰¹æ®Šçš„å­—ä½“èƒ½è¾¾åˆ°10Mbä»¥ä¸Šï¼Œä¸ºäº†æé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦å¿…é¡»å¯¹ä»–åŠ¨æ‰‹ï¼Œä¹‹å‰å°è¯•è¿‡å­—è››ï¼Œä½†å·²å¹´ä¹…å¤±ä¿®ï¼Œç°æœ‰<a href=\"https://github.com/ecomfe/fontmin\">Fontmin</a>ä»¥åŠ<a href=\"https://github.com/ecomfe/gulp-fontmin\">gulp-fontmin</a>ï¼ˆå…¶å®ä¹Ÿå¥½å¤šå¹´äº†ï¼Œé—®é¢˜ä¸å¤§ï¼‰ï¼Œæ‰€ä»¥è°ƒè¯•ä¸€ä¸‹ï¼Œå†™ç¯‡æ•™ç¨‹ï¼Œç„¶åç¾åŒ–ä¸€ä¸‹è‡ªå·±çš„åšå®¢ã€‚</p>\n<h2 id=\"å¯\"><a href=\"#å¯\" class=\"headerlink\" title=\"å¯\"></a>å¯</h2><p>é¦–å…ˆéœ€è¦æ‰¾åˆ°ä½ å–œæ¬¢çš„å­—ä½“ï¼Œè¿™é‡Œä¸å†è®¨è®ºã€‚</p>\n<p>å®‰è£…ä¾èµ–ï¼ˆæ—¶é—´æœ‰ç‚¹é•¿æ˜¯æ­£å¸¸æƒ…å†µï¼‰</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --global gulp-cli #å…¨å±€å®‰è£…gulpæŒ‡ä»¤é›†</span><br><span class=\"line\">npm install gulp --save #å®‰è£…gulpæ’ä»¶</span><br><span class=\"line\">npm install --save-dev gulp-fontmin</span><br></pre></td></tr></table></figure>\n<h2 id=\"é¢„\"><a href=\"#é¢„\" class=\"headerlink\" title=\"é¢„\"></a>é¢„</h2><p><code>gulp</code>å®‰è£…å®Œæˆåè¿è¡Œ<code>gulp -v</code>æ£€æŸ¥ç‰ˆæœ¬</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gulp -v</span><br><span class=\"line\">CLI version: 2.3.0</span><br><span class=\"line\">Local version: 4.0.2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸­\"><a href=\"#ä¸­\" class=\"headerlink\" title=\"ä¸­\"></a>ä¸­</h2><p>é¦–å…ˆåœ¨åšå®¢æ ¹ç›®å½•æ–°å»º<code>gulpfile.js</code></p>\n<p>å¤åˆ¶ä»¥ä¸‹ä»£ç å¹¶æŒ‰ç…§æ³¨é‡Šä¿®æ”¹</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fontmin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-fontmin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">minifyFont</span>(<span class=\"params\">text, cb</span>) </span>&#123;</span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src(<span class=\"string\">&#x27;source/font/*.ttf&#x27;</span>)  <span class=\"comment\">//åŸå­—ä½“æ‰€åœ¨ç›®å½•</span></span><br><span class=\"line\">        .pipe(fontmin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">text</span>: text</span><br><span class=\"line\">        &#125;))</span><br><span class=\"line\">        .pipe(gulp.dest(<span class=\"string\">&#x27;source/fontdest/&#x27;</span>))<span class=\"comment\">//å‹ç¼©åçš„è¾“å‡ºç›®å½•</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, cb);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;mini-font&#x27;</span>, <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span>  &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> buffers = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src([<span class=\"string\">&#x27;./.deploy_git/**/*.html&#x27;</span>]) <span class=\"comment\">//HTMLæ–‡ä»¶æ‰€åœ¨ç›®å½•è¯·æ ¹æ®è‡ªèº«æƒ…å†µä¿®æ”¹</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;data&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">file</span>) </span>&#123;</span><br><span class=\"line\">            buffers.push(file.contents);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> text = Buffer.concat(buffers).toString(<span class=\"string\">&#x27;utf-8&#x27;</span>);</span><br><span class=\"line\">            minifyFont(text, cb);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;default&#x27;</span>, gulp.parallel(</span><br><span class=\"line\"> <span class=\"string\">&#x27;mini-font&#x27;</span></span><br><span class=\"line\">  ))</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ½®\"><a href=\"#æ½®\" class=\"headerlink\" title=\"æ½®\"></a>æ½®</h2><p>å¼•å…¥å­—ä½“</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@font-face</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-family</span>:<span class=\"string\">&#x27;lxk&#x27;</span> ;  <span class=\"comment\">/* å­—ä½“åè‡ªå®šä¹‰å³å¯ */</span></span><br><span class=\"line\">    <span class=\"attribute\">src</span>:<span class=\"built_in\">url</span>(<span class=\"string\">&#x27;/fontdest/ææ—­ç§‘ä¹¦æ³•1.4.ttf&#x27;</span>); <span class=\"comment\">/* å­—ä½“æ–‡ä»¶è·¯å¾„ */</span></span><br><span class=\"line\">    <span class=\"attribute\">font-display</span> : swap;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Butterfly è¯·å‚ç…§<a href=\"https://akilar.top/posts/ebf20e02/\">åº—é•¿è‡ªå®šä¹‰å­—ä½“æ•™ç¨‹</a></p>\n<h2 id=\"ç»ˆ\"><a href=\"#ç»ˆ\" class=\"headerlink\" title=\"ç»ˆ\"></a>ç»ˆ</h2><p>æœ€ç»ˆæ•ˆæœ</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-26-48.png\" alt=\"2021-12-30-08-26-48\"></p>\n<p>æ³¨ï¼šå­—ä½“è¶Šå¤§å‹ç¼©æ•ˆæœè¶Šå¥½</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-23-00.png\" alt=\"2021-12-30-08-23-00\"></p>\n<p>ä»æ­¤å¯ä»¥è‚†æ— å¿Œæƒ®çš„ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“äº†</p>\n","categories":[],"tags":[{"name":"ğŸŒ¼HEXO","path":"api/tags/ğŸŒ¼HEXO.json"},{"name":"âœï¸Font","path":"api/tags/âœï¸Font.json"},{"name":"ğŸ“‘Compose","path":"api/tags/ğŸ“‘Compose.json"}]}