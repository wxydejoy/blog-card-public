{"title":"HEXO & Fontmin","slug":"code/HEXO&Fontmin","date":"2021-12-30T12:12:21.000Z","updated":"2022-02-05T06:43:41.720Z","comments":true,"path":"api/articles/code/HEXO&Fontmin.json","excerpt":null,"covers":["https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-26-48.png","https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-23-00.png"],"content":"<h2 id=\"初\"><a href=\"#初\" class=\"headerlink\" title=\"初\"></a>初</h2><p>想要自定义字体吗？<br>字体太大？<br>担心字体拖慢加载速度？<br>快来使用gulp-fontmin！<br>字体缩小5倍不是梦！</p>\n<p>字体一直一来都是静态博客中比较大的文件，尤其是特殊的字体能达到10Mb以上，为了提高网页加载速度必须对他动手，之前尝试过字蛛，但已年久失修，现有<a href=\"https://github.com/ecomfe/fontmin\">Fontmin</a>以及<a href=\"https://github.com/ecomfe/gulp-fontmin\">gulp-fontmin</a>（其实也好多年了，问题不大），所以调试一下，写篇教程，然后美化一下自己的博客。</p>\n<h2 id=\"启\"><a href=\"#启\" class=\"headerlink\" title=\"启\"></a>启</h2><p>首先需要找到你喜欢的字体，这里不再讨论。</p>\n<p>安装依赖（时间有点长是正常情况）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --global gulp-cli #全局安装gulp指令集</span><br><span class=\"line\">npm install gulp --save #安装gulp插件</span><br><span class=\"line\">npm install --save-dev gulp-fontmin</span><br></pre></td></tr></table></figure>\n<h2 id=\"预\"><a href=\"#预\" class=\"headerlink\" title=\"预\"></a>预</h2><p><code>gulp</code>安装完成后运行<code>gulp -v</code>检查版本</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gulp -v</span><br><span class=\"line\">CLI version: 2.3.0</span><br><span class=\"line\">Local version: 4.0.2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"中\"><a href=\"#中\" class=\"headerlink\" title=\"中\"></a>中</h2><p>首先在博客根目录新建<code>gulpfile.js</code></p>\n<p>复制以下代码并按照注释修改</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fontmin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-fontmin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">minifyFont</span>(<span class=\"params\">text, cb</span>) </span>&#123;</span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src(<span class=\"string\">&#x27;source/font/*.ttf&#x27;</span>)  <span class=\"comment\">//原字体所在目录</span></span><br><span class=\"line\">        .pipe(fontmin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">text</span>: text</span><br><span class=\"line\">        &#125;))</span><br><span class=\"line\">        .pipe(gulp.dest(<span class=\"string\">&#x27;source/fontdest/&#x27;</span>))<span class=\"comment\">//压缩后的输出目录</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, cb);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;mini-font&#x27;</span>, <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span>  &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> buffers = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src([<span class=\"string\">&#x27;./.deploy_git/**/*.html&#x27;</span>]) <span class=\"comment\">//HTML文件所在目录请根据自身情况修改</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;data&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">file</span>) </span>&#123;</span><br><span class=\"line\">            buffers.push(file.contents);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> text = Buffer.concat(buffers).toString(<span class=\"string\">&#x27;utf-8&#x27;</span>);</span><br><span class=\"line\">            minifyFont(text, cb);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;default&#x27;</span>, gulp.parallel(</span><br><span class=\"line\"> <span class=\"string\">&#x27;mini-font&#x27;</span></span><br><span class=\"line\">  ))</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"潮\"><a href=\"#潮\" class=\"headerlink\" title=\"潮\"></a>潮</h2><p>引入字体</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@font-face</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-family</span>:<span class=\"string\">&#x27;lxk&#x27;</span> ;  <span class=\"comment\">/* 字体名自定义即可 */</span></span><br><span class=\"line\">    <span class=\"attribute\">src</span>:<span class=\"built_in\">url</span>(<span class=\"string\">&#x27;/fontdest/李旭科书法1.4.ttf&#x27;</span>); <span class=\"comment\">/* 字体文件路径 */</span></span><br><span class=\"line\">    <span class=\"attribute\">font-display</span> : swap;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Butterfly 请参照<a href=\"https://akilar.top/posts/ebf20e02/\">店长自定义字体教程</a></p>\n<h2 id=\"终\"><a href=\"#终\" class=\"headerlink\" title=\"终\"></a>终</h2><p>最终效果</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-26-48.png\" alt=\"2021-12-30-08-26-48\"></p>\n<p>注：字体越大压缩效果越好</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-23-00.png\" alt=\"2021-12-30-08-23-00\"></p>\n<p>从此可以肆无忌惮的使用自定义字体了</p>\n","more":"<h2 id=\"初\"><a href=\"#初\" class=\"headerlink\" title=\"初\"></a>初</h2><p>想要自定义字体吗？<br>字体太大？<br>担心字体拖慢加载速度？<br>快来使用gulp-fontmin！<br>字体缩小5倍不是梦！</p>\n<p>字体一直一来都是静态博客中比较大的文件，尤其是特殊的字体能达到10Mb以上，为了提高网页加载速度必须对他动手，之前尝试过字蛛，但已年久失修，现有<a href=\"https://github.com/ecomfe/fontmin\">Fontmin</a>以及<a href=\"https://github.com/ecomfe/gulp-fontmin\">gulp-fontmin</a>（其实也好多年了，问题不大），所以调试一下，写篇教程，然后美化一下自己的博客。</p>\n<h2 id=\"启\"><a href=\"#启\" class=\"headerlink\" title=\"启\"></a>启</h2><p>首先需要找到你喜欢的字体，这里不再讨论。</p>\n<p>安装依赖（时间有点长是正常情况）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --global gulp-cli #全局安装gulp指令集</span><br><span class=\"line\">npm install gulp --save #安装gulp插件</span><br><span class=\"line\">npm install --save-dev gulp-fontmin</span><br></pre></td></tr></table></figure>\n<h2 id=\"预\"><a href=\"#预\" class=\"headerlink\" title=\"预\"></a>预</h2><p><code>gulp</code>安装完成后运行<code>gulp -v</code>检查版本</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ gulp -v</span><br><span class=\"line\">CLI version: 2.3.0</span><br><span class=\"line\">Local version: 4.0.2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"中\"><a href=\"#中\" class=\"headerlink\" title=\"中\"></a>中</h2><p>首先在博客根目录新建<code>gulpfile.js</code></p>\n<p>复制以下代码并按照注释修改</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fontmin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;gulp-fontmin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">minifyFont</span>(<span class=\"params\">text, cb</span>) </span>&#123;</span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src(<span class=\"string\">&#x27;source/font/*.ttf&#x27;</span>)  <span class=\"comment\">//原字体所在目录</span></span><br><span class=\"line\">        .pipe(fontmin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">text</span>: text</span><br><span class=\"line\">        &#125;))</span><br><span class=\"line\">        .pipe(gulp.dest(<span class=\"string\">&#x27;source/fontdest/&#x27;</span>))<span class=\"comment\">//压缩后的输出目录</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, cb);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;mini-font&#x27;</span>, <span class=\"function\">(<span class=\"params\">cb</span>) =&gt;</span>  &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> buffers = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    gulp</span><br><span class=\"line\">        .src([<span class=\"string\">&#x27;./.deploy_git/**/*.html&#x27;</span>]) <span class=\"comment\">//HTML文件所在目录请根据自身情况修改</span></span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;data&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">file</span>) </span>&#123;</span><br><span class=\"line\">            buffers.push(file.contents);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .on(<span class=\"string\">&#x27;end&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> text = Buffer.concat(buffers).toString(<span class=\"string\">&#x27;utf-8&#x27;</span>);</span><br><span class=\"line\">            minifyFont(text, cb);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">gulp.task(<span class=\"string\">&#x27;default&#x27;</span>, gulp.parallel(</span><br><span class=\"line\"> <span class=\"string\">&#x27;mini-font&#x27;</span></span><br><span class=\"line\">  ))</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"潮\"><a href=\"#潮\" class=\"headerlink\" title=\"潮\"></a>潮</h2><p>引入字体</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@font-face</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-family</span>:<span class=\"string\">&#x27;lxk&#x27;</span> ;  <span class=\"comment\">/* 字体名自定义即可 */</span></span><br><span class=\"line\">    <span class=\"attribute\">src</span>:<span class=\"built_in\">url</span>(<span class=\"string\">&#x27;/fontdest/李旭科书法1.4.ttf&#x27;</span>); <span class=\"comment\">/* 字体文件路径 */</span></span><br><span class=\"line\">    <span class=\"attribute\">font-display</span> : swap;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>Butterfly 请参照<a href=\"https://akilar.top/posts/ebf20e02/\">店长自定义字体教程</a></p>\n<h2 id=\"终\"><a href=\"#终\" class=\"headerlink\" title=\"终\"></a>终</h2><p>最终效果</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-26-48.png\" alt=\"2021-12-30-08-26-48\"></p>\n<p>注：字体越大压缩效果越好</p>\n<p><img src=\"https://image.wxydejoy.top/image/HEXO&Fontmin/2021-12-30-08-23-00.png\" alt=\"2021-12-30-08-23-00\"></p>\n<p>从此可以肆无忌惮的使用自定义字体了</p>\n","categories":[],"tags":[{"name":"🌼HEXO","path":"api/tags/🌼HEXO.json"},{"name":"✏️Font","path":"api/tags/✏️Font.json"},{"name":"📑Compose","path":"api/tags/📑Compose.json"}]}