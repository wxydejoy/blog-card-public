{"title":"MoneyProgress_win","slug":"post/code/cpp/MoneyProgress_win","date":"2023-04-11T04:08:17.000Z","updated":"2023-04-11T04:08:17.000Z","comments":true,"path":"api/articles/post/code/cpp/MoneyProgress_win.json","excerpt":null,"covers":["https://img.undf.top/image/MoneyProgress_win/20230411122233-2023-04-11.png","https://img.undf.top/image/MoneyProgress_win/20230411122553-2023-04-11.png","https://img.undf.top/image/MoneyProgress_win/20230411123559-2023-04-11.png"],"content":"<h2 id=\"èµ·å› \"><a href=\"#èµ·å› \" class=\"headerlink\" title=\"èµ·å› \"></a>èµ·å› </h2><p>å‰æ®µæ—¶é—´åˆ†äº«äº†ä¸€ä¸ªMoneyProgressçš„Macè½¯ä»¶,ä¸€ç›´æœ‰äººåœ¨è®ºå›å‘å¸–é—®æœ‰æ²¡æœ‰winç‰ˆçš„,æ°å¥½æœ€è¿‘åœ¨çœ‹Qt,äºæ˜¯å°±æœ‰äº†è¿™ä¸ªé¡¹ç›®.</p>\n<p>å†™è¿™ä¸ªè´´å­çš„ç›®çš„æ˜¯ä¸ºäº†è®°å½•ä¸€ä¸‹å¼€å‘è¿‡ç¨‹,ä»¥åŠé‡åˆ°çš„é—®é¢˜.</p>\n<p>ä»¥åå¯ä»¥æ‹¿å®ƒåšå‚è€ƒ,ä¹Ÿå¯ä»¥ç»™æœ‰éœ€è¦çš„äººæä¾›ä¸€äº›å¸®åŠ©.</p>\n<p>MACç‰ˆçš„é¡¹ç›®åœ°å€: <a href=\"https://github.com/Lakr233/MoneyProgress\">MoneyProgress</a><br>WINç‰ˆçš„é¡¹ç›®åœ°å€: <a href=\"https://github.com/wxydejoy/MoneyProgress_win\">MoneyProgress_win</a></p>\n<p>ç¨‹åºå¾ˆå¤§ç¨‹åº¦å‚è€ƒäº†åŸä½œè€…çš„UIè®¾è®¡,è¿™é‡Œå†æ¬¡æ„Ÿè°¢åŸä½œè€….</p>\n<h2 id=\"å¼€å‘ç¯å¢ƒ\"><a href=\"#å¼€å‘ç¯å¢ƒ\" class=\"headerlink\" title=\"å¼€å‘ç¯å¢ƒ\"></a>å¼€å‘ç¯å¢ƒ</h2><ul>\n<li>Windows 10 20H2(è¿™ä¸ªä¸æ˜¯å¾ˆé‡è¦)</li>\n<li>Qt 5.15 with Mingw(è¿™ä¸ªå¾ˆé‡è¦)</li>\n</ul>\n<h2 id=\"å¼€å‘è¿‡ç¨‹\"><a href=\"#å¼€å‘è¿‡ç¨‹\" class=\"headerlink\" title=\"å¼€å‘è¿‡ç¨‹\"></a>å¼€å‘è¿‡ç¨‹</h2><p>è¿™å—çœ‹æˆ‘çš„<a href=\"https://github.com/wxydejoy/MoneyProgress_win/commits/main\">commit</a>è®°å½•å°±è¡Œäº†,è™½ç„¶æœ‰ç‚¹ä¹±,ä½†æ˜¯åŸºæœ¬ä¸Šéƒ½æ˜¯æœ‰ç”¨çš„. </p>\n<p>è¿™é‡Œåªè®°å½•ä¸€äº›æ¯”è¾ƒé‡è¦çš„é—®é¢˜,å…¶ä»–çš„é—®é¢˜å¯ä»¥å‚è€ƒ<a href=\"https://doc.qt.io/qt-5/index.html\">Qtå®˜æ–¹æ–‡æ¡£</a></p>\n<p>å¤šçœ‹æ–‡æ¡£,å¤šçœ‹æ–‡æ¡£,å¤šçœ‹æ–‡æ¡£.</p>\n<h3 id=\"é—®é¢˜1-å›¾ç‰‡è¿‡å¤§\"><a href=\"#é—®é¢˜1-å›¾ç‰‡è¿‡å¤§\" class=\"headerlink\" title=\"é—®é¢˜1: å›¾ç‰‡è¿‡å¤§\"></a>é—®é¢˜1: å›¾ç‰‡è¿‡å¤§</h3><p>åŸä½œè€…çš„å›¾ç‰‡éƒ½æ˜¯pngæ ¼å¼,å¤§å°è¶³è¶³æœ‰3.27MB,åˆ†è¾¨ç‡ä¸º1024x1024,åº”è¯¥æ˜¯è‡ªå·±ç”»çš„å§.</p>\n<p>åˆšå¼€å§‹å¯¼å…¥å›¾ç‰‡è®¾ç½®ä¸º<code>label</code>è®¾ç½®æ ·å¼è¡¨<code>background-image: url(:/img/avatar.png);</code></p>\n<p>æ˜¯è¿™æ ·çš„:</p>\n<p><img src=\"https://img.undf.top/image/MoneyProgress_win/20230411122233-2023-04-11.png\" alt=\"20230411122233-2023-04-11\"></p>\n<p>å¯ä»¥çœ‹åˆ°å›¾ç‰‡å¾ˆå¤§,å¾ˆå¥‡æ€ª,</p>\n<p>è§£å†³åŠæ³•:</p>\n<p><strong>è®¾ç½®ä¸º<code>border-image: url(:/img/avatar.png);</code></strong></p>\n<p><img src=\"https://img.undf.top/image/MoneyProgress_win/20230411122553-2023-04-11.png\" alt=\"20230411122553-2023-04-11\"></p>\n<p>è¿™æ ·å®ƒå°±ä¼šè‡ªåŠ¨ç¼©æ”¾äº†.å¯ä»¥é€šè¿‡è®¾ç½®<code>label</code>çš„<code>width</code>å’Œ<code>height</code>æ¥æ§åˆ¶å›¾ç‰‡çš„å¤§å°.</p>\n<h3 id=\"é—®é¢˜2-æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡\"><a href=\"#é—®é¢˜2-æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡\" class=\"headerlink\" title=\"é—®é¢˜2: æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡\"></a>é—®é¢˜2: æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡</h3><p>è¿™ä¸ªé—®é¢˜æ˜¯è®ºå›ä¸Šæœ‰äººæå‡ºæ¥çš„,æˆ‘ä¹Ÿé‡åˆ°äº†.</p>\n<p>åŸä»£ç ä¸º:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç </span></span><br><span class=\"line\"><span class=\"comment\">// è·å–å±å¹•åˆ†è¾¨ç‡é«˜åº¦</span></span><br><span class=\"line\">QApplication::<span class=\"built_in\">desktop</span>()-&gt;<span class=\"built_in\">width</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å®é™…è·å–çš„ä¸ä¸€å®šå°±æ˜¯å½“å‰å±å¹•çš„åˆ†è¾¨ç‡,æœ‰æ—¶å€™ä¼šè·å–åˆ°é”™è¯¯çš„å€¼.<br>æ¯”å¦‚ä½ æœ‰å¤šå—å±å¹•,å®ƒä¼šè·å–åˆ°æ‰€æœ‰å±å¹•çš„åˆ†è¾¨ç‡çš„å’Œ.å°±å¾ˆç¦»è°±.<br>è¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„ç¨‹åºåœ¨ä¸åŒçš„å±å¹•ä¸Šæ˜¾ç¤ºçš„æ•ˆæœä¸ä¸€æ ·.<br>ä»»åŠ¡æ çš„å¼¹çª—å°±å¥‡å¥‡æ€ªæ€ªçš„.ç”šè‡³çœ‹ä¸åˆ°.</p>\n<p><img src=\"https://img.undf.top/image/MoneyProgress_win/20230411123559-2023-04-11.png\" alt=\"20230411123559-2023-04-11\"></p>\n<p>è§£å†³åŠæ³•:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç </span></span><br><span class=\"line\">QApplication::<span class=\"built_in\">screenAt</span>(<span class=\"built_in\">QCursor</span>().<span class=\"built_in\">pos</span>())-&gt;<span class=\"built_in\">geometry</span>().<span class=\"built_in\">width</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ„ä¸ºè·å–é¼ æ ‡æ‰€åœ¨å±å¹•çš„åˆ†è¾¨ç‡å®½åº¦.éå¸¸ok.</p>\n<h3 id=\"é—®é¢˜3-æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°\"><a href=\"#é—®é¢˜3-æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°\" class=\"headerlink\" title=\"é—®é¢˜3: æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°\"></a>é—®é¢˜3: æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°</h3><p>é—®é¢˜ä»£ç :</p>\n<p>å› ä¸ºæˆ‘æƒ³å®ç°æ¯æ¬¡ç‚¹å‡»ä»»åŠ¡æ å›¾æ ‡éƒ½ä¼šå¼¹å‡ºä¸€ä¸ªå¼¹çª—,æ˜¾ç¤ºå½“å‰çš„æŒ£é’±è¿›åº¦,æ‰€ä»¥æˆ‘åœ¨<code>MoneyProgress</code>ç±»ä¸­æ·»åŠ äº†ä¸€ä¸ª<code>IconMessage</code>ç±»çš„å¯¹è±¡(ä¸€ä¸ªå°widget),å¹¶ä¸”åœ¨<code>MoneyProgress</code>ç±»ä¸­æ·»åŠ äº†ä¸€ä¸ª<code>update</code>å‡½æ•°,ç”¨æ¥æ›´æ–°å¼¹çª—ä¸­çš„æ–‡æœ¬.<br>åŒæ—¶<code>update</code>è¿˜è¦è´Ÿè´£æ›´æ–°ä¸»çª—å£ä¸­çš„æ–‡æœ¬.æ‰€ä»¥å°±æœ‰äº†å¦‚ä¸‹ä»£ç </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">MoneyProgress::update</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç </span></span><br><span class=\"line\">    <span class=\"comment\">// åˆ¤æ–­ä¸¤ä¸ªç•Œé¢æ˜¯å¦å¯è§</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>-&gt;<span class=\"built_in\">isVisible</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ui-&gt;labelMoneyNow-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨å½“å‰å·²ç»æŒ£äº†&quot;</span>+QString::<span class=\"built_in\">number</span>(moneyday*progress/<span class=\"number\">1000</span>,<span class=\"string\">&#x27;f&#x27;</span>,<span class=\"number\">1</span>)+<span class=\"string\">&quot;å…ƒ;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelDay-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€æœˆå·¥ä½œ&quot;</span> + QString::<span class=\"built_in\">number</span>(days) + <span class=\"string\">&quot;å¤©;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelMoneyDay-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€å¤©èƒ½æŒ£&quot;</span> + QString::<span class=\"built_in\">number</span>(moneyday, <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"number\">1</span>) + <span class=\"string\">&quot;å…ƒ;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelHourDay-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€å¤©å·¥ä½œ&quot;</span> + QString::<span class=\"built_in\">number</span>(hours, <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"number\">1</span>) + <span class=\"string\">&quot;å°æ—¶;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelMoneySecond-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€ç§’é’Ÿèƒ½æŒ£&quot;</span> + QString::<span class=\"built_in\">number</span>(moneysecond, <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"number\">6</span>) + <span class=\"string\">&quot;å…ƒ;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (iconmessage.<span class=\"built_in\">isVisible</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        iconmessage.<span class=\"built_in\">update</span>(progress, moneyday);</span><br><span class=\"line\">        <span class=\"built_in\">qDebug</span>() &lt;&lt; progress;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°å¤§è‡´æ€è·¯å°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªç•Œé¢æ˜¯å¦å¯è§,å¦‚æœå¯è§å°±æ›´æ–°æ–‡æœ¬.ä½†æ˜¯ä»»åŠ¡æ é‚£ä¸ªå°çª—å£çš„æ–‡æœ¬æ— æ³•æ›´æ–°,è°ƒè¯•å‘ç°äº†ä¸€ä¸ªä½çº§é”™è¯¯</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">update</span>(); <span class=\"comment\">//é”™è¯¯çš„å†™æ³•</span></span><br><span class=\"line\">iconmessage.<span class=\"built_in\">show</span>();</span><br><span class=\"line\"><span class=\"comment\">// update(); æŠŠupdate()æ”¾åœ¨è¿™é‡Œå°±å¯ä»¥æ›´æ–°äº†</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ç¡®å®å¾ˆä½çº§</p>\n<h3 id=\"é—®é¢˜4-QSettings-æ— æ•ˆ\"><a href=\"#é—®é¢˜4-QSettings-æ— æ•ˆ\" class=\"headerlink\" title=\"é—®é¢˜4: QSettings æ— æ•ˆ\"></a>é—®é¢˜4: QSettings æ— æ•ˆ</h3><p>è¿™ä¸ªé—®é¢˜æ˜¯åœ¨ä¿å­˜æ—¶é—´çš„æ—¶å€™é‡åˆ°çš„,æˆ‘æƒ³æŠŠè®¾ç½®ä¿å­˜åˆ°<code>QSettings</code>é‡Œé¢,ä½†æ˜¯å‘ç°æ— è®ºæ€ä¹ˆè®¾ç½®éƒ½æ— æ•ˆ.<br>åœ¨ç½‘ä¸Šé€›äº†åŠå¤©,å‘ç°æ˜¯å› ä¸º<code>QSettings</code>åªèƒ½åœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä½¿ç”¨,ä¸èƒ½åœ¨å…¶ä»–å‡½æ•°ä¸­ä½¿ç”¨.</p>\n<p>é—®é¢˜ä»£ç :</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//åŸæœ¬è®¾è®¡çš„æ˜¯æ¯æ¬¡è®¾ç½®æ”¹å˜å°±ä¿å­˜ä¸€æ¬¡,ä½†æ˜¯å‘ç°æ— æ•ˆ</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">MoneyProgress::on_timeSleepdown_userTimeChanged</span><span class=\"params\">(<span class=\"type\">const</span> QTime &amp;time)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç  settings æ˜¯ä¸€ä¸ªQSettingså¯¹è±¡,åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰</span></span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;sleepDown&quot;</span>, sleepDown);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// ä¿å­˜è®¾ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>è§£å†³åŠæ³•:</p>\n<p>å°†<code>QSettings</code>çš„ä¿å­˜è®¾ç½®æ”¾åˆ°ææ„å‡½æ•°ä¸­,è¿™æ ·å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†.</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MoneyProgress::~<span class=\"built_in\">MoneyProgress</span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\">QSettings <span class=\"title\">settings</span><span class=\"params\">(<span class=\"string\">&quot;MuYin&quot;</span>, <span class=\"string\">&quot;MoneyProgress_win&quot;</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">// ä¿å­˜è®¾ç½®</span></span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;money&quot;</span>, money);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;days&quot;</span>, days);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;workUp&quot;</span>, workUp);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;workDown&quot;</span>, workDown);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;sleepUp&quot;</span>, sleepUp);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;sleepDown&quot;</span>, sleepDown);</span><br><span class=\"line\">    <span class=\"comment\">// settings.setValue(&quot;geometry&quot;, this-&gt;saveGeometry());</span></span><br><span class=\"line\">    <span class=\"comment\">// settings.setValue(&quot;windowState&quot;, this-&gt;saveState());</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ä¿å­˜è®¾ç½®</span></span><br><span class=\"line\">    settings.<span class=\"built_in\">sync</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">delete</span> ui;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜5-QSSæ ·å¼è¡¨ä¸ä¼šç”¨\"><a href=\"#é—®é¢˜5-QSSæ ·å¼è¡¨ä¸ä¼šç”¨\" class=\"headerlink\" title=\"é—®é¢˜5: QSSæ ·å¼è¡¨ä¸ä¼šç”¨\"></a>é—®é¢˜5: QSSæ ·å¼è¡¨ä¸ä¼šç”¨</h3><p>å› ä¸ºæˆ‘è®¾ç½®äº†æ ‡é¢˜æ éšè—</p>\n<p><code>this-&gt;setWindowFlags(Qt::Dialog | Qt::FramelessWindowHint | Qt::WindowStaysOnTopHint); // éšè—æ ‡é¢˜æ </code></p>\n<p>æ‰€ä»¥ä¸€ç›´å¼„ä¸å‡ºæ¥<code>borde</code>çš„æ ·å¼,æœ€åå‘ç°æ”¹<code>centralwidget</code>çš„<code>border</code>å±æ€§å°±å¯ä»¥äº†.</p>\n<p>é—®é¢˜ä»£ç :</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">QWidget &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-width</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">255</span>, <span class=\"number\">216</span>, <span class=\"number\">58</span>, <span class=\"number\">225</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è§£å†³æ–¹æ³•</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">QWidget &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">255</span>, <span class=\"number\">216</span>, <span class=\"number\">58</span>, <span class=\"number\">225</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">QWidget<span class=\"selector-id\">#centralwidget</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">3px</span> solid <span class=\"number\">#ffee6f</span>;</span><br><span class=\"line\">    <span class=\"comment\">/* border-color: rgba(255, 216, 58, 225); */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>cssè¿˜æ˜¯ä¸å¤ªäº†è§£,å›å¤´éœ€è¦å¥½å¥½å­¦ä¹ ä¸€ä¸‹.</p>\n<h3 id=\"é—®é¢˜6-ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜\"><a href=\"#é—®é¢˜6-ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜\" class=\"headerlink\" title=\"é—®é¢˜6: ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜\"></a>é—®é¢˜6: ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜</h3><p>å¼•ç”¨ç½‘å‹çš„è¯:</p>\n<blockquote>\n<p>Qtä¸‹é«˜åˆ†å±çš„é—®é¢˜ï¼Œå‡ ä¹æ˜¯ä¸€åœºç¾éš¾ã€‚å¸Œæœ›æœªæ¥ Qt èƒ½æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>\n</blockquote>\n<p>è§£å†³æ–¹æ³•: æ·»åŠ  <code>qt/etc/qt.conf</code>æ–‡ä»¶,æ³¨æ„è¿™æ˜¯åœ¨qrcæ–‡ä»¶ä¸­çš„è·¯å¾„,å®ƒçš„å®Œæ•´è·¯å¾„æ˜¯<code>qrc:/qt/etc/qt.conf</code>,ç½‘ä¸Šè¯´ä¸€å®šä¸è¦å¼„é”™<br>æ–‡ä»¶å†…å®¹çš„æ„æ€ä¸ºä¸ä½¿ç”¨QTçš„ç¼©æ”¾åŠŸèƒ½,è€Œæ˜¯ä½¿ç”¨ç³»ç»Ÿçš„ç¼©æ”¾åŠŸèƒ½</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Platforms]</span></span><br><span class=\"line\"><span class=\"attr\">WindowsArguments</span> = dpiawareness=<span class=\"number\">0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å…·ä½“çœ‹è¿™ä¸ª<a href=\"https://github.com/wxydejoy/MoneyProgress_win/commit/76ce3656f6f45008369d1b023bd450f817b59ab3\">commit</a></p>\n<h3 id=\"é—®é¢˜7-QtCreator-æ— æ³•Debug\"><a href=\"#é—®é¢˜7-QtCreator-æ— æ³•Debug\" class=\"headerlink\" title=\"é—®é¢˜7: QtCreator æ— æ³•Debug\"></a>é—®é¢˜7: QtCreator æ— æ³•Debug</h3><p>å°†buildæ¨¡å¼ä»releaseæ”¹ä¸ºdebugå°±å¯ä»¥äº†â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦.</p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>é¡¹ç›®ä¸å¤§,æ—¶é—´ä¹Ÿä¸ç®—é•¿,å¤§æ¦‚ä¸¤ä¸‰ä¸ªæ™šä¸Šçš„æ ·å­,ä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿,æ¯”å¦‚è¯´<code>QSettings</code>çš„ä½¿ç”¨,<code>QSS</code>çš„ä½¿ç”¨,<code>QTimer</code>çš„ä½¿ç”¨,<code>QApplication::screenAt(QCursor().pos())-&gt;geometry().width()</code>çš„ä½¿ç”¨,ä»¥åŠä¸€äº›å°æŠ€å·§,æ¯”å¦‚è¯´<code>QSettings</code>åªèƒ½åœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä½¿ç”¨,<code>QSS</code>çš„<code>border</code>å±æ€§è¦å†™åœ¨<code>centralwidget</code>ä¸Š,<code>QTimer</code>çš„<code>start</code>å‡½æ•°å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°,è¡¨ç¤ºå»¶è¿Ÿå¤šä¹…å¼€å§‹è®¡æ—¶,<code>QApplication::screenAt(QCursor().pos())-&gt;geometry().width()</code>å¯ä»¥è·å–é¼ æ ‡æ‰€åœ¨å±å¹•çš„åˆ†è¾¨ç‡å®½åº¦ç­‰ç­‰.</p>\n<p>æœ€åå¸Œæœ›å¤§å®¶èƒ½å¤Ÿå¤šå¤šæ”¯æŒ,å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜,æ¬¢è¿æŒ‡æ­£,å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€,æˆ‘ä¼šå°½å¿«å›å¤çš„.</p>\n","more":"<h2 id=\"èµ·å› \"><a href=\"#èµ·å› \" class=\"headerlink\" title=\"èµ·å› \"></a>èµ·å› </h2><p>å‰æ®µæ—¶é—´åˆ†äº«äº†ä¸€ä¸ªMoneyProgressçš„Macè½¯ä»¶,ä¸€ç›´æœ‰äººåœ¨è®ºå›å‘å¸–é—®æœ‰æ²¡æœ‰winç‰ˆçš„,æ°å¥½æœ€è¿‘åœ¨çœ‹Qt,äºæ˜¯å°±æœ‰äº†è¿™ä¸ªé¡¹ç›®.</p>\n<p>å†™è¿™ä¸ªè´´å­çš„ç›®çš„æ˜¯ä¸ºäº†è®°å½•ä¸€ä¸‹å¼€å‘è¿‡ç¨‹,ä»¥åŠé‡åˆ°çš„é—®é¢˜.</p>\n<p>ä»¥åå¯ä»¥æ‹¿å®ƒåšå‚è€ƒ,ä¹Ÿå¯ä»¥ç»™æœ‰éœ€è¦çš„äººæä¾›ä¸€äº›å¸®åŠ©.</p>\n<p>MACç‰ˆçš„é¡¹ç›®åœ°å€: <a href=\"https://github.com/Lakr233/MoneyProgress\">MoneyProgress</a><br>WINç‰ˆçš„é¡¹ç›®åœ°å€: <a href=\"https://github.com/wxydejoy/MoneyProgress_win\">MoneyProgress_win</a></p>\n<p>ç¨‹åºå¾ˆå¤§ç¨‹åº¦å‚è€ƒäº†åŸä½œè€…çš„UIè®¾è®¡,è¿™é‡Œå†æ¬¡æ„Ÿè°¢åŸä½œè€….</p>\n<h2 id=\"å¼€å‘ç¯å¢ƒ\"><a href=\"#å¼€å‘ç¯å¢ƒ\" class=\"headerlink\" title=\"å¼€å‘ç¯å¢ƒ\"></a>å¼€å‘ç¯å¢ƒ</h2><ul>\n<li>Windows 10 20H2(è¿™ä¸ªä¸æ˜¯å¾ˆé‡è¦)</li>\n<li>Qt 5.15 with Mingw(è¿™ä¸ªå¾ˆé‡è¦)</li>\n</ul>\n<h2 id=\"å¼€å‘è¿‡ç¨‹\"><a href=\"#å¼€å‘è¿‡ç¨‹\" class=\"headerlink\" title=\"å¼€å‘è¿‡ç¨‹\"></a>å¼€å‘è¿‡ç¨‹</h2><p>è¿™å—çœ‹æˆ‘çš„<a href=\"https://github.com/wxydejoy/MoneyProgress_win/commits/main\">commit</a>è®°å½•å°±è¡Œäº†,è™½ç„¶æœ‰ç‚¹ä¹±,ä½†æ˜¯åŸºæœ¬ä¸Šéƒ½æ˜¯æœ‰ç”¨çš„. </p>\n<p>è¿™é‡Œåªè®°å½•ä¸€äº›æ¯”è¾ƒé‡è¦çš„é—®é¢˜,å…¶ä»–çš„é—®é¢˜å¯ä»¥å‚è€ƒ<a href=\"https://doc.qt.io/qt-5/index.html\">Qtå®˜æ–¹æ–‡æ¡£</a></p>\n<p>å¤šçœ‹æ–‡æ¡£,å¤šçœ‹æ–‡æ¡£,å¤šçœ‹æ–‡æ¡£.</p>\n<h3 id=\"é—®é¢˜1-å›¾ç‰‡è¿‡å¤§\"><a href=\"#é—®é¢˜1-å›¾ç‰‡è¿‡å¤§\" class=\"headerlink\" title=\"é—®é¢˜1: å›¾ç‰‡è¿‡å¤§\"></a>é—®é¢˜1: å›¾ç‰‡è¿‡å¤§</h3><p>åŸä½œè€…çš„å›¾ç‰‡éƒ½æ˜¯pngæ ¼å¼,å¤§å°è¶³è¶³æœ‰3.27MB,åˆ†è¾¨ç‡ä¸º1024x1024,åº”è¯¥æ˜¯è‡ªå·±ç”»çš„å§.</p>\n<p>åˆšå¼€å§‹å¯¼å…¥å›¾ç‰‡è®¾ç½®ä¸º<code>label</code>è®¾ç½®æ ·å¼è¡¨<code>background-image: url(:/img/avatar.png);</code></p>\n<p>æ˜¯è¿™æ ·çš„:</p>\n<p><img src=\"https://img.undf.top/image/MoneyProgress_win/20230411122233-2023-04-11.png\" alt=\"20230411122233-2023-04-11\"></p>\n<p>å¯ä»¥çœ‹åˆ°å›¾ç‰‡å¾ˆå¤§,å¾ˆå¥‡æ€ª,</p>\n<p>è§£å†³åŠæ³•:</p>\n<p><strong>è®¾ç½®ä¸º<code>border-image: url(:/img/avatar.png);</code></strong></p>\n<p><img src=\"https://img.undf.top/image/MoneyProgress_win/20230411122553-2023-04-11.png\" alt=\"20230411122553-2023-04-11\"></p>\n<p>è¿™æ ·å®ƒå°±ä¼šè‡ªåŠ¨ç¼©æ”¾äº†.å¯ä»¥é€šè¿‡è®¾ç½®<code>label</code>çš„<code>width</code>å’Œ<code>height</code>æ¥æ§åˆ¶å›¾ç‰‡çš„å¤§å°.</p>\n<h3 id=\"é—®é¢˜2-æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡\"><a href=\"#é—®é¢˜2-æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡\" class=\"headerlink\" title=\"é—®é¢˜2: æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡\"></a>é—®é¢˜2: æ— æ³•è·å–åˆ°æ­£ç¡®çš„å±å¹•åˆ†è¾¨ç‡</h3><p>è¿™ä¸ªé—®é¢˜æ˜¯è®ºå›ä¸Šæœ‰äººæå‡ºæ¥çš„,æˆ‘ä¹Ÿé‡åˆ°äº†.</p>\n<p>åŸä»£ç ä¸º:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç </span></span><br><span class=\"line\"><span class=\"comment\">// è·å–å±å¹•åˆ†è¾¨ç‡é«˜åº¦</span></span><br><span class=\"line\">QApplication::<span class=\"built_in\">desktop</span>()-&gt;<span class=\"built_in\">width</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å®é™…è·å–çš„ä¸ä¸€å®šå°±æ˜¯å½“å‰å±å¹•çš„åˆ†è¾¨ç‡,æœ‰æ—¶å€™ä¼šè·å–åˆ°é”™è¯¯çš„å€¼.<br>æ¯”å¦‚ä½ æœ‰å¤šå—å±å¹•,å®ƒä¼šè·å–åˆ°æ‰€æœ‰å±å¹•çš„åˆ†è¾¨ç‡çš„å’Œ.å°±å¾ˆç¦»è°±.<br>è¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„ç¨‹åºåœ¨ä¸åŒçš„å±å¹•ä¸Šæ˜¾ç¤ºçš„æ•ˆæœä¸ä¸€æ ·.<br>ä»»åŠ¡æ çš„å¼¹çª—å°±å¥‡å¥‡æ€ªæ€ªçš„.ç”šè‡³çœ‹ä¸åˆ°.</p>\n<p><img src=\"https://img.undf.top/image/MoneyProgress_win/20230411123559-2023-04-11.png\" alt=\"20230411123559-2023-04-11\"></p>\n<p>è§£å†³åŠæ³•:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç </span></span><br><span class=\"line\">QApplication::<span class=\"built_in\">screenAt</span>(<span class=\"built_in\">QCursor</span>().<span class=\"built_in\">pos</span>())-&gt;<span class=\"built_in\">geometry</span>().<span class=\"built_in\">width</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ„ä¸ºè·å–é¼ æ ‡æ‰€åœ¨å±å¹•çš„åˆ†è¾¨ç‡å®½åº¦.éå¸¸ok.</p>\n<h3 id=\"é—®é¢˜3-æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°\"><a href=\"#é—®é¢˜3-æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°\" class=\"headerlink\" title=\"é—®é¢˜3: æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°\"></a>é—®é¢˜3: æ–‡æœ¬æ— æ³•æ­£å¸¸æ›´æ–°</h3><p>é—®é¢˜ä»£ç :</p>\n<p>å› ä¸ºæˆ‘æƒ³å®ç°æ¯æ¬¡ç‚¹å‡»ä»»åŠ¡æ å›¾æ ‡éƒ½ä¼šå¼¹å‡ºä¸€ä¸ªå¼¹çª—,æ˜¾ç¤ºå½“å‰çš„æŒ£é’±è¿›åº¦,æ‰€ä»¥æˆ‘åœ¨<code>MoneyProgress</code>ç±»ä¸­æ·»åŠ äº†ä¸€ä¸ª<code>IconMessage</code>ç±»çš„å¯¹è±¡(ä¸€ä¸ªå°widget),å¹¶ä¸”åœ¨<code>MoneyProgress</code>ç±»ä¸­æ·»åŠ äº†ä¸€ä¸ª<code>update</code>å‡½æ•°,ç”¨æ¥æ›´æ–°å¼¹çª—ä¸­çš„æ–‡æœ¬.<br>åŒæ—¶<code>update</code>è¿˜è¦è´Ÿè´£æ›´æ–°ä¸»çª—å£ä¸­çš„æ–‡æœ¬.æ‰€ä»¥å°±æœ‰äº†å¦‚ä¸‹ä»£ç </p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">MoneyProgress::update</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç </span></span><br><span class=\"line\">    <span class=\"comment\">// åˆ¤æ–­ä¸¤ä¸ªç•Œé¢æ˜¯å¦å¯è§</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>-&gt;<span class=\"built_in\">isVisible</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ui-&gt;labelMoneyNow-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨å½“å‰å·²ç»æŒ£äº†&quot;</span>+QString::<span class=\"built_in\">number</span>(moneyday*progress/<span class=\"number\">1000</span>,<span class=\"string\">&#x27;f&#x27;</span>,<span class=\"number\">1</span>)+<span class=\"string\">&quot;å…ƒ;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelDay-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€æœˆå·¥ä½œ&quot;</span> + QString::<span class=\"built_in\">number</span>(days) + <span class=\"string\">&quot;å¤©;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelMoneyDay-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€å¤©èƒ½æŒ£&quot;</span> + QString::<span class=\"built_in\">number</span>(moneyday, <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"number\">1</span>) + <span class=\"string\">&quot;å…ƒ;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelHourDay-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€å¤©å·¥ä½œ&quot;</span> + QString::<span class=\"built_in\">number</span>(hours, <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"number\">1</span>) + <span class=\"string\">&quot;å°æ—¶;&quot;</span>);</span><br><span class=\"line\">        ui-&gt;labelMoneySecond-&gt;<span class=\"built_in\">setText</span>(<span class=\"string\">&quot;æ‚¨ä¸€ç§’é’Ÿèƒ½æŒ£&quot;</span> + QString::<span class=\"built_in\">number</span>(moneysecond, <span class=\"string\">&#x27;f&#x27;</span>, <span class=\"number\">6</span>) + <span class=\"string\">&quot;å…ƒ;&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (iconmessage.<span class=\"built_in\">isVisible</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        iconmessage.<span class=\"built_in\">update</span>(progress, moneyday);</span><br><span class=\"line\">        <span class=\"built_in\">qDebug</span>() &lt;&lt; progress;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°å¤§è‡´æ€è·¯å°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªç•Œé¢æ˜¯å¦å¯è§,å¦‚æœå¯è§å°±æ›´æ–°æ–‡æœ¬.ä½†æ˜¯ä»»åŠ¡æ é‚£ä¸ªå°çª—å£çš„æ–‡æœ¬æ— æ³•æ›´æ–°,è°ƒè¯•å‘ç°äº†ä¸€ä¸ªä½çº§é”™è¯¯</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">update</span>(); <span class=\"comment\">//é”™è¯¯çš„å†™æ³•</span></span><br><span class=\"line\">iconmessage.<span class=\"built_in\">show</span>();</span><br><span class=\"line\"><span class=\"comment\">// update(); æŠŠupdate()æ”¾åœ¨è¿™é‡Œå°±å¯ä»¥æ›´æ–°äº†</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ç¡®å®å¾ˆä½çº§</p>\n<h3 id=\"é—®é¢˜4-QSettings-æ— æ•ˆ\"><a href=\"#é—®é¢˜4-QSettings-æ— æ•ˆ\" class=\"headerlink\" title=\"é—®é¢˜4: QSettings æ— æ•ˆ\"></a>é—®é¢˜4: QSettings æ— æ•ˆ</h3><p>è¿™ä¸ªé—®é¢˜æ˜¯åœ¨ä¿å­˜æ—¶é—´çš„æ—¶å€™é‡åˆ°çš„,æˆ‘æƒ³æŠŠè®¾ç½®ä¿å­˜åˆ°<code>QSettings</code>é‡Œé¢,ä½†æ˜¯å‘ç°æ— è®ºæ€ä¹ˆè®¾ç½®éƒ½æ— æ•ˆ.<br>åœ¨ç½‘ä¸Šé€›äº†åŠå¤©,å‘ç°æ˜¯å› ä¸º<code>QSettings</code>åªèƒ½åœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä½¿ç”¨,ä¸èƒ½åœ¨å…¶ä»–å‡½æ•°ä¸­ä½¿ç”¨.</p>\n<p>é—®é¢˜ä»£ç :</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//åŸæœ¬è®¾è®¡çš„æ˜¯æ¯æ¬¡è®¾ç½®æ”¹å˜å°±ä¿å­˜ä¸€æ¬¡,ä½†æ˜¯å‘ç°æ— æ•ˆ</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">MoneyProgress::on_timeSleepdown_userTimeChanged</span><span class=\"params\">(<span class=\"type\">const</span> QTime &amp;time)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œçœç•¥äº†ä¸€äº›ä»£ç  settings æ˜¯ä¸€ä¸ªQSettingså¯¹è±¡,åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰</span></span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;sleepDown&quot;</span>, sleepDown);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// ä¿å­˜è®¾ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>è§£å†³åŠæ³•:</p>\n<p>å°†<code>QSettings</code>çš„ä¿å­˜è®¾ç½®æ”¾åˆ°ææ„å‡½æ•°ä¸­,è¿™æ ·å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†.</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MoneyProgress::~<span class=\"built_in\">MoneyProgress</span>()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"function\">QSettings <span class=\"title\">settings</span><span class=\"params\">(<span class=\"string\">&quot;MuYin&quot;</span>, <span class=\"string\">&quot;MoneyProgress_win&quot;</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"comment\">// ä¿å­˜è®¾ç½®</span></span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;money&quot;</span>, money);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;days&quot;</span>, days);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;workUp&quot;</span>, workUp);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;workDown&quot;</span>, workDown);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;sleepUp&quot;</span>, sleepUp);</span><br><span class=\"line\">    settings.<span class=\"built_in\">setValue</span>(<span class=\"string\">&quot;sleepDown&quot;</span>, sleepDown);</span><br><span class=\"line\">    <span class=\"comment\">// settings.setValue(&quot;geometry&quot;, this-&gt;saveGeometry());</span></span><br><span class=\"line\">    <span class=\"comment\">// settings.setValue(&quot;windowState&quot;, this-&gt;saveState());</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ä¿å­˜è®¾ç½®</span></span><br><span class=\"line\">    settings.<span class=\"built_in\">sync</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">delete</span> ui;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜5-QSSæ ·å¼è¡¨ä¸ä¼šç”¨\"><a href=\"#é—®é¢˜5-QSSæ ·å¼è¡¨ä¸ä¼šç”¨\" class=\"headerlink\" title=\"é—®é¢˜5: QSSæ ·å¼è¡¨ä¸ä¼šç”¨\"></a>é—®é¢˜5: QSSæ ·å¼è¡¨ä¸ä¼šç”¨</h3><p>å› ä¸ºæˆ‘è®¾ç½®äº†æ ‡é¢˜æ éšè—</p>\n<p><code>this-&gt;setWindowFlags(Qt::Dialog | Qt::FramelessWindowHint | Qt::WindowStaysOnTopHint); // éšè—æ ‡é¢˜æ </code></p>\n<p>æ‰€ä»¥ä¸€ç›´å¼„ä¸å‡ºæ¥<code>borde</code>çš„æ ·å¼,æœ€åå‘ç°æ”¹<code>centralwidget</code>çš„<code>border</code>å±æ€§å°±å¯ä»¥äº†.</p>\n<p>é—®é¢˜ä»£ç :</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">QWidget &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-width</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">255</span>, <span class=\"number\">216</span>, <span class=\"number\">58</span>, <span class=\"number\">225</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è§£å†³æ–¹æ³•</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">QWidget &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-color</span>: <span class=\"built_in\">rgba</span>(<span class=\"number\">255</span>, <span class=\"number\">216</span>, <span class=\"number\">58</span>, <span class=\"number\">225</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">15px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">QWidget<span class=\"selector-id\">#centralwidget</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"built_in\">rgb</span>(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">3px</span> solid <span class=\"number\">#ffee6f</span>;</span><br><span class=\"line\">    <span class=\"comment\">/* border-color: rgba(255, 216, 58, 225); */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>cssè¿˜æ˜¯ä¸å¤ªäº†è§£,å›å¤´éœ€è¦å¥½å¥½å­¦ä¹ ä¸€ä¸‹.</p>\n<h3 id=\"é—®é¢˜6-ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜\"><a href=\"#é—®é¢˜6-ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜\" class=\"headerlink\" title=\"é—®é¢˜6: ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜\"></a>é—®é¢˜6: ç¨‹åºæ•´ä½“ç¼©æ”¾é—®é¢˜</h3><p>å¼•ç”¨ç½‘å‹çš„è¯:</p>\n<blockquote>\n<p>Qtä¸‹é«˜åˆ†å±çš„é—®é¢˜ï¼Œå‡ ä¹æ˜¯ä¸€åœºç¾éš¾ã€‚å¸Œæœ›æœªæ¥ Qt èƒ½æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>\n</blockquote>\n<p>è§£å†³æ–¹æ³•: æ·»åŠ  <code>qt/etc/qt.conf</code>æ–‡ä»¶,æ³¨æ„è¿™æ˜¯åœ¨qrcæ–‡ä»¶ä¸­çš„è·¯å¾„,å®ƒçš„å®Œæ•´è·¯å¾„æ˜¯<code>qrc:/qt/etc/qt.conf</code>,ç½‘ä¸Šè¯´ä¸€å®šä¸è¦å¼„é”™<br>æ–‡ä»¶å†…å®¹çš„æ„æ€ä¸ºä¸ä½¿ç”¨QTçš„ç¼©æ”¾åŠŸèƒ½,è€Œæ˜¯ä½¿ç”¨ç³»ç»Ÿçš„ç¼©æ”¾åŠŸèƒ½</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Platforms]</span></span><br><span class=\"line\"><span class=\"attr\">WindowsArguments</span> = dpiawareness=<span class=\"number\">0</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å…·ä½“çœ‹è¿™ä¸ª<a href=\"https://github.com/wxydejoy/MoneyProgress_win/commit/76ce3656f6f45008369d1b023bd450f817b59ab3\">commit</a></p>\n<h3 id=\"é—®é¢˜7-QtCreator-æ— æ³•Debug\"><a href=\"#é—®é¢˜7-QtCreator-æ— æ³•Debug\" class=\"headerlink\" title=\"é—®é¢˜7: QtCreator æ— æ³•Debug\"></a>é—®é¢˜7: QtCreator æ— æ³•Debug</h3><p>å°†buildæ¨¡å¼ä»releaseæ”¹ä¸ºdebugå°±å¯ä»¥äº†â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦.</p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>é¡¹ç›®ä¸å¤§,æ—¶é—´ä¹Ÿä¸ç®—é•¿,å¤§æ¦‚ä¸¤ä¸‰ä¸ªæ™šä¸Šçš„æ ·å­,ä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿,æ¯”å¦‚è¯´<code>QSettings</code>çš„ä½¿ç”¨,<code>QSS</code>çš„ä½¿ç”¨,<code>QTimer</code>çš„ä½¿ç”¨,<code>QApplication::screenAt(QCursor().pos())-&gt;geometry().width()</code>çš„ä½¿ç”¨,ä»¥åŠä¸€äº›å°æŠ€å·§,æ¯”å¦‚è¯´<code>QSettings</code>åªèƒ½åœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä½¿ç”¨,<code>QSS</code>çš„<code>border</code>å±æ€§è¦å†™åœ¨<code>centralwidget</code>ä¸Š,<code>QTimer</code>çš„<code>start</code>å‡½æ•°å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°,è¡¨ç¤ºå»¶è¿Ÿå¤šä¹…å¼€å§‹è®¡æ—¶,<code>QApplication::screenAt(QCursor().pos())-&gt;geometry().width()</code>å¯ä»¥è·å–é¼ æ ‡æ‰€åœ¨å±å¹•çš„åˆ†è¾¨ç‡å®½åº¦ç­‰ç­‰.</p>\n<p>æœ€åå¸Œæœ›å¤§å®¶èƒ½å¤Ÿå¤šå¤šæ”¯æŒ,å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜,æ¬¢è¿æŒ‡æ­£,å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€,æˆ‘ä¼šå°½å¿«å›å¤çš„.</p>\n","categories":[{"name":"ğŸ’»Code","path":"api/categories/ğŸ’»Code.json"}],"tags":[{"name":"â³C++","path":"api/tags/â³C++.json"},{"name":"âŒ¨ï¸Qt","path":"api/tags/âŒ¨ï¸Qt.json"}]}